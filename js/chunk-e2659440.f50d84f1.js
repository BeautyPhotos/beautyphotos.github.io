(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2659440"],{"2f77":function(t,a,e){},aff9:function(t,a,e){"use strict";var n=e("2f77"),s=e.n(n);s.a},f12b:function(t,a,e){"use strict";e.r(a);var n,s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main"},[e("van-sticky",[e("van-row",{staticClass:"header"},[t.userInfo?e("van-col",{attrs:{span:"3"},on:{click:t.showPopup}},[e("van-icon",{staticClass:"user-icon",attrs:{size:"32",name:"https://b.yzcdn.cn/vant/icon-demo-1126.png"}})],1):t._e(),e("van-col",{attrs:{span:t.userInfo?18:21}},[e("van-tabs",{on:{change:t.onTabChange},model:{value:t.tabIndex,callback:function(a){t.tabIndex=a},expression:"tabIndex"}},t._l(t.tabs,(function(t,a){return e("van-tab",{key:a,attrs:{title:t.name}})})),1)],1),e("van-col",{attrs:{span:"3"},on:{click:function(a){return t.$router.push("search")}}},[e("van-icon",{staticClass:"search-icon",attrs:{size:"30",name:"search"}})],1)],1)],1),e("div",{staticClass:"content"},[e("van-list",{ref:"list",attrs:{"error-text":"请求失败，点击重新加载"}},[t._l(t.list,(function(a,n){return e("van-panel",{key:n,staticClass:"list-item",on:{click:function(e){return t.getArticlesDetail(a._id)}},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"item-header"},[e("span",[t._v(t._s(n+1+"、"+a.title))]),t.userInfo?e("van-icon",{attrs:{size:"24",name:"like-o"}}):t._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"item-footer"},[e("span",[t._v(t._s(a.category))]),e("span",[t._v(t._s(t.$formatTime(a._createTime)))])])]},proxy:!0}],null,!0)},[e("div",{staticClass:"item-content"},t._l(a.thumbnails,(function(a,n){return e("lazy-component",{key:n,staticClass:"image"},[e("van-image",{staticClass:"image",attrs:{"lazy-load":"",src:a},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1)})),1)])})),e("van-cell",{staticClass:"bottom"})],2)],1),e("van-row",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"footer"},[e("van-col",{attrs:{span:"21"}},[e("van-pagination",{attrs:{"total-items":t.totalCount,"show-page-size":5,"items-per-page":t.pageSize,"force-ellipses":""},on:{change:t.onPageChange},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1),e("van-col",{attrs:{span:"3"}},[e("van-button",{attrs:{type:"info"},on:{click:t.showCustomPageDialog}},[t._v("指定页")])],1)],1),e("van-popup",{staticClass:"left-menu",style:{width:"70%",height:"100%"},attrs:{round:"",closeable:"",position:"left"},model:{value:t.showMenu,callback:function(a){t.showMenu=a},expression:"showMenu"}},[t.userInfo?e("van-card",{scopedSlots:t._u([{key:"thumb",fn:function(){return[e("van-image",{attrs:{round:"",width:"40px",height:"40px",src:"https://img.yzcdn.cn/vant/cat.jpeg"}})]},proxy:!0},{key:"tags",fn:function(){return[t._v(" 金币：$"+t._s(t.userInfo.coin)+" "),e("van-tag",{attrs:{plain:"",type:"danger",size:"medium"}},[t._v("充值")])]},proxy:!0},{key:"title",fn:function(){return[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.userInfo.email))]),e("span",{staticClass:"desc"},[t._v(t._s(null!=t.userInfo.role&&"vip"==t.userInfo.role.name?"VIP会员":"普通会员"))]),e("span",{staticClass:"desc"},[t._v(t._s(null!=t.userInfo.role&&"vip"==t.userInfo.role.name?"VIP会员":""))])])]},proxy:!0}],null,!1,823853608)}):t._e(),e("van-cell",{attrs:{title:"我的收藏",icon:"like-o"}}),e("van-cell",{attrs:{title:"已购主题",icon:"completed"}}),e("van-cell",{attrs:{title:"充值中心",icon:"gold-coin-o"}}),e("van-cell",{attrs:{title:"关于我们",icon:"info-o"}}),e("van-cell",{attrs:{title:"退出登录",icon:"upgrade"}})],1),e("van-popup",{model:{value:t.isShowCustomPageDialog,callback:function(a){t.isShowCustomPageDialog=a},expression:"isShowCustomPageDialog"}},[e("van-row",[e("van-col",{attrs:{span:"6",align:"center"}},[e("van-button",{attrs:{size:"small",type:"info"},on:{click:function(a){return t.selectCustomPage(1)}}},[t._v("《首页")])],1),e("van-col",{attrs:{span:"6",align:"center"}},[e("van-field",{attrs:{size:"small",type:"digit"},model:{value:t.showCustomPage,callback:function(a){t.showCustomPage=a},expression:"showCustomPage"}})],1),e("van-col",{attrs:{span:"6",align:"center"}},[e("van-button",{attrs:{size:"small",type:"info"},on:{click:function(a){return t.selectCustomPage(t.showCustomPage)}}},[t._v("跳转》")])],1),e("van-col",{attrs:{span:"6",align:"center"}},[e("van-button",{attrs:{size:"small",type:"info"},on:{click:function(a){return t.selectCustomPage(t.totalPage)}}},[t._v("尾页》")])],1)],1)],1),e("van-overlay",{attrs:{show:t.showLoading},on:{click:function(a){t.showLoading=!1}}},[e("div",{staticClass:"wrapper"},[e("van-loading",{attrs:{color:"#fff",size:"60"}})],1)])],1)},o=[],i=(e("e25e"),e("ade3")),c=(e("6a39"),e("f240")),l=(e("f1dc"),e("6e47")),r=(e("9cb7"),e("66fd")),u=(e("66b9"),e("b650")),g=(e("4056"),e("44bf")),h=(e("3647"),e("ea47")),d=(e("2994"),e("2bdd")),f=(e("0cc8"),e("3104")),p=(e("ac1e"),e("543e")),m=(e("8a58"),e("e41f")),v=(e("c3a6"),e("ad06")),b=(e("be7f"),e("565f")),w=(e("c194"),e("7744")),C=(e("81e6"),e("9ffb")),P=(e("5f1a"),e("a3e2")),y=(e("4d48"),e("d1e1")),_=(e("da3c"),e("0b33")),k=(e("bda7"),e("5e46")),I={components:(n={},Object(i["a"])(n,k["a"].name,k["a"]),Object(i["a"])(n,_["a"].name,_["a"]),Object(i["a"])(n,y["a"].name,y["a"]),Object(i["a"])(n,P["a"].name,P["a"]),Object(i["a"])(n,C["a"].name,C["a"]),Object(i["a"])(n,w["a"].name,w["a"]),Object(i["a"])(n,b["a"].name,b["a"]),Object(i["a"])(n,v["a"].name,v["a"]),Object(i["a"])(n,m["a"].name,m["a"]),Object(i["a"])(n,p["a"].name,p["a"]),Object(i["a"])(n,f["a"].name,f["a"]),Object(i["a"])(n,d["a"].name,d["a"]),Object(i["a"])(n,h["a"].name,h["a"]),Object(i["a"])(n,g["a"].name,g["a"]),Object(i["a"])(n,u["a"].name,u["a"]),Object(i["a"])(n,r["a"].name,r["a"]),Object(i["a"])(n,l["a"].name,l["a"]),Object(i["a"])(n,c["a"].name,c["a"]),n),data:function(){var t;return t={tabs:[],list:[],isShowCustomPageDialog:!1,showCustomPage:0,showMenu:!1,showLoading:!1,totalPage:0,totalCount:0},Object(i["a"])(t,"totalPage",0),Object(i["a"])(t,"pageSize",10),Object(i["a"])(t,"currentPage",1),Object(i["a"])(t,"tabIndex",0),Object(i["a"])(t,"userInfo",null),Object(i["a"])(t,"endTime",""),t},created:function(){this.getMenus()},methods:{hangleGoUp:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},goLogin:function(){var t=this,a={email:" ",password:" ",version:"1.0.1",device:"h5"};http.post("/user/login",a).then((function(a){if(0==a.status){t.tabs=a.data.menu,t.userInfo=a.data.userInfo;try{a.data.userInfo.role.endTime&&(t.endTime=formatTime(a.data.userInfo.role.endTime))}catch(e){}t.$setToken(a.data.userInfo.token),t.getArticles()}}))},getMenus:function(){var t=this,a={version:"1.0.1",device:"h5"};http.post("/user/categorys",a).then((function(a){0==a.status&&a.data&&(t.tabs=a.data,t.getArticles())}))},getArticles:function(){var t=this,a={pageIndex:this.currentPage-1,pageSize:this.pageSize,category:this.tabs[this.tabIndex].id,type:0};this.showLoading=!0,http.post("/article/paging",a,{headers:{token:this.$getToken()}}).then((function(a){t.showLoading=!1,0==a.status&&t.currentPage-1==a.data.pageIndex&&(t.totalPage=t.pageCount(a.data.totalCount,a.data.pageSize),t.totalCount=a.data.totalCount,t.list=a.data.list,t.hangleGoUp())}))},pageCount:function(t,a){return t>0?t<a?1:t%a?parseInt(t/a)+1:t/a:0},getArticlesDetail:function(t){var a=this,e={_id:t};this.showLoading=!0,http.post("/article/detail",e,{headers:{token:this.$getToken()}}).then((function(t){a.showLoading=!1,0==t.status&&t.data&&t.data.title&&(localStorage.setItem("article_detail",JSON.stringify(t.data)),window._article_detail=t.data,a.$router.push("detail"))}))},onTabChange:function(t){this.currentPage=1,this.tabIndex=t,this.getArticles()},onPageChange:function(){this.getArticles()},showPopup:function(){this.userInfo?this.showMenu=!this.showMenu:this.showMenu=!1},selectCustomPage:function(t){t>0&&t<=this.totalPage?this.currentPage=t:this.currentPage=this.totalPage,this.isShowCustomPageDialog=!1,this.getArticles()},showCustomPageDialog:function(){this.showCustomPage=this.currentPage,this.isShowCustomPageDialog=!this.isShowCustomPageDialog}}},j=I,O=(e("aff9"),e("2877")),x=Object(O["a"])(j,s,o,!1,null,null,null);a["default"]=x.exports}}]);